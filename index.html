
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text RPG Adventure</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- Full-screen map background -->
        <div class="map-section" id="mapSection" style="display: none;">
            <h2>🗺️ Map</h2>
            <div class="map-with-editor">
                <div id="mapContainer" class="map-container"></div>
                <div id="mapEditorSidebar" class="map-editor-sidebar" style="display: none;">
                    <div id="mapEditorContent"></div>
                </div>
            </div>
        </div>

        <!-- Player sidebar - left side -->
        <div class="sidebar" id="sidebar" style="display: none;">
            <h2>Player</h2>
            <div class="stat-group">
                <div class="stat">
                    <span class="stat-label">Wounds</span>
                    <span class="stat-value wounds" id="wounds">0/6</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Food</span>
                    <span class="stat-value" id="food">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Luck</span>
                    <span class="stat-value" id="luck">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Coins</span>
                    <span class="stat-value" id="coins">0</span>
                </div>
            </div>

            <h3>Skills</h3>
            <div class="skills-list" id="skills"></div>

            <h3>Inventory</h3>
            <div class="inventory-list" id="inventory"></div>

            <h3>Companions</h3>
            <div class="companions-list" id="companions"></div>

            <div id="companionDetails"></div>

            <button class="shop-btn" id="shopBtn" style="display: none;">🏪 Open Shop</button>
            <button class="shop-btn" id="inventoryBtn" style="background: #5e8a3a; display: none;">📦 Manage Inventory</button>
            <button class="shop-btn" id="debugBtn" style="background: #dc3545; display: none;">🐛 Add Companion</button>
            <button class="shop-btn" id="debugItemsBtn" style="background: #8b5cf6; display: none;">📦 Give Items & Companion</button>
            <button class="shop-btn" id="debugRandomItemBtn" style="background: #17a2b8; display: none;">🎲 Add Random Item</button>
            <button class="shop-btn" id="encounterBtn" style="background: #6610f2; display: none;">🎭 Launch Encounter</button>
            <button class="shop-btn" id="sequenceBtn" style="background: #ff9800; display: none;">🎯 Start Sequence</button>
            <button class="shop-btn" id="woundsBtn" style="background: #ff6b6b; display: none;">💔 Test Wounds</button>

            <h3>Map Controls</h3>
            <button class="shop-btn" id="mapViewBtn" style="background: #17a2b8; display: none;">👁️ Map View Mode</button>
            <button class="shop-btn" id="mapEditBtn" style="background: #ffc107; display: none;">✏️ Map Edit Mode</button>

            <h3>UI Controls</h3>
            <button class="shop-btn" id="toggleEncounterPanelBtn" style="background: #28a745; display: none;">📜 Toggle Encounter</button>
            <button class="shop-btn" id="toggleLogPanelBtn" style="background: #6c757d; display: none;">📋 Toggle Event Log</button>
            <button class="shop-btn" id="toggleTTSBtn" style="background: #9c27b0; display: none;">🔇 Text-to-Speech: OFF</button>
        </div>

        <!-- Start screen panel - centered -->
        <div class="start-panel" id="startPanel">
            <div class="start-screen" id="startScreen">
                <h1>🗡️ Text RPG Adventure 🗡️</h1>
                <p>Embark on a perilous journey filled with danger, mystery, and adventure!</p>
                <button class="start-btn" id="startBtn">Begin Adventure</button>
            </div>
        </div>

        <!-- Encounters panel - centered -->
        <div class="encounter-panel" id="encounterPanel" style="display: none;">
            <div class="panel-header">
                <h2>Current Encounter</h2>
                <button class="toggle-panel-btn" id="toggleEncounterBtn">−</button>
            </div>
            <div class="panel-content" id="encounterPanelContent">
                <div id="encounterContainer"></div>
            </div>
        </div>

        <!-- Event log sidebar - right side -->
        <div class="log-sidebar" id="logSidebar" style="display: none;">
            <div class="panel-header">
                <h2>Event Log</h2>
                <button class="toggle-panel-btn" id="toggleLogBtn">−</button>
            </div>
            <div class="panel-content" id="logPanelContent">
                <div id="logContainer"></div>
            </div>
        </div>
    </div>
    
    <!-- Shop Modal -->
    <div id="shopModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🏪 Trading Post</h2>
                <button class="close-btn" id="closeShop">&times;</button>
            </div>
            <div class="shop-tabs">
                <button class="tab-btn active" id="buyTab">Buy Items</button>
                <button class="tab-btn" id="sellTab">Sell Items</button>
            </div>
            <div id="shopContent"></div>
        </div>
    </div>
    
    <!-- Inventory Management Modal -->
    <div id="inventoryModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2>📦 Inventory Management</h2>
                <button class="close-btn" id="closeInventory">&times;</button>
            </div>
            <div id="inventoryContent"></div>
        </div>
    </div>
    
    <!-- Encounter Selector Modal -->
    <div id="encounterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🎭 Select Encounter</h2>
                <button class="close-btn" id="closeEncounter">&times;</button>
            </div>
            <div id="encounterContent"></div>
        </div>
    </div>

    <!-- Sequence Selector Modal -->
    <div id="sequenceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🎯 Start Encounter Sequence</h2>
                <button class="close-btn" id="closeSequence">&times;</button>
            </div>
            <div id="sequenceContent">
                <div style="padding: 20px;">
                    <label for="sequenceTag" style="display: block; margin-bottom: 10px; color: #d4af37; font-weight: bold;">Select Tag:</label>
                    <select id="sequenceTag" style="width: 100%; padding: 10px; margin-bottom: 20px; background: #2d1b2e; color: #d4af37; border: 2px solid #8b7355; border-radius: 3px; font-size: 1em;">
                        <option value="dungeon">🏰 Dungeon</option>
                        <option value="forest">🌲 Forest</option>
                        <option value="road">🛤️ Road</option>
                        <option value="city">🏛️ City</option>
                        <option value="plains">🌾 Plains</option>
                        <option value="wilderness">🏕️ Wilderness</option>
                        <option value="ruins">🏚️ Ruins</option>
                    </select>

                    <label for="sequenceCount" style="display: block; margin-bottom: 10px; color: #d4af37; font-weight: bold;">Number of Encounters:</label>
                    <input type="number" id="sequenceCount" min="1" max="20" value="5" style="width: 100%; padding: 10px; margin-bottom: 20px; background: #2d1b2e; color: #d4af37; border: 2px solid #8b7355; border-radius: 3px; font-size: 1em;">

                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; color: #d4af37; cursor: pointer;">
                            <input type="checkbox" id="sequenceRetreatable" checked style="margin-right: 10px; width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-weight: bold;">🏃 Allow Retreat (can exit sequence early)</span>
                        </label>
                        <p style="margin: 5px 0 0 30px; font-size: 0.9em; color: #999;">Not available on last 2 encounters</p>
                    </div>

                    <button id="startSequenceBtn" class="shop-btn" style="width: 100%; background: #ff9800; margin-top: 10px;">🎯 Start Sequence</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Data Files -->
    <script src="data/items.js"></script>
    <script src="data/skills.js"></script>

    <!-- Model Files -->
    <script src="models/Character.js"></script>
    <script src="models/GameState.js"></script>

    <!-- Encounter Files -->
    <script src="encounters/Encounter.js"></script>
    <script src="encounters/Actions.js"></script>
    <script src="encounters/Encounters.js"></script>

    <!-- Engine Files -->
    <script src="engine/Game.js"></script>

    <!-- View Files -->
    <script src="view/HexMap.js"></script>
    <script src="view/Renderer.js"></script>
    <script src="view/UIManager.js"></script>

    <!-- Main Initialization -->
    <script src="js/main.js"></script>
</body>
</html>